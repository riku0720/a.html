var vimana=vimana||{};
(function(){vimana.factory={button:function(a){return $("\x3cinput\x3e",{type:"button","class":"portal-button"}).val(a)},linkButton:function(a){return $("\x3ca\x3e",{"class":"portal-button",href:a.url,target:a.target}).text(a.value)},toggle:function(a){var b=$("\x3cspan\x3e",{"class":"portal-toggle-on"}).text("on"),c=$("\x3cspan\x3e",{"class":"portal-toggle-off"}).text("off"),e=$("\x3cdiv\x3e",{"class":"portal-toggle"}).on("click",{args:a.args},function(e){if(!$(this).hasClass("disable"))if(b.hasClass("active")&&!c.hasClass("active"))b.removeClass("active"),
c.addClass("active"),"function"===typeof a.off&&a.off(e.data.args);else if(b.addClass("active"),c.removeClass("active"),"function"===typeof a.on)a.on(e.data.args)}).append(b).append(c);void 0===a.initial||a.initial?b.addClass("active"):c.addClass("active");(void 0!==a.disable||a.disable)&&e.addClass("disable");return e},textLine:function(a){return $("\x3cinput\x3e",{type:"text","class":"portal-text",placeholder:a})},contentPart:function(){var a=$("\x3ch1\x3e",{"class":"content-part-title"}),b=$("\x3cdiv\x3e",
{"class":"content-part-body"});return $("\x3csection\x3e",{"class":"content-part"}).append(a).append(b)},floatwindow:function(a){var b={count:0,callback:function(){},init:function(a,d){b.count=a;b.callback=d;0>=b.count&&b.callback()},load:function(){b.count--;0>=b.count&&b.callback()}};$("#portal-floatwindow").length&&$("#portal-floatwindow").remove();var c=[];vimana.util.arrayKeyExists("windowObject",a)&&(c=a.windowObject);var e="800px",g="600px",k="delete";vimana.util.arrayKeyExists("windowProperty",
a)&&(vimana.util.arrayKeyExists("width",a.windowProperty)&&(e=a.windowProperty.width),vimana.util.arrayKeyExists("height",a.windowProperty)&&(g=a.windowProperty.height),vimana.util.arrayKeyExists("outerClick",a.windowProperty)&&(k=a.windowProperty.outerClick));var f=$("\x3cdiv/\x3e",{id:"portal-floatwindow"}).css("display","none"),h=$("\x3cdiv/\x3e",{"class":"portal-floatwindow-background"}),d=$("\x3cdiv/\x3e",{"class":"portal-floatwindow-window"}),m=$("\x3cdiv/\x3e",{"class":"portal-floatwindow-heder"}),
n=$("\x3cdiv/\x3e",{"class":"portal-floatwindow-content"}),p=function(){f.fadeIn()};vimana.util.arrayKeyExists("callback",a)&&(p=function(){f.fadeIn();a.callback()});d.append(m).append(n);h.append(d);f.append(h);$("body").append(f);m.css({width:e,height:"15px"});d.css({width:e,height:g});n.css({width:e,height:d.height()-15+"px"});d.outerHeight()<$(window).height()&&(e=($(window).height()-d.outerHeight())/2,d.css("margin-top",e+"px"));d.outerWidth()<$(window).width()&&(e=($(window).width()-d.outerWidth())/
2,d.css("margin-left",e+"px"));switch(k){case "delete":h.on("click",function(b){b.target===h[0]&&f.fadeOut("nomal",function(){f.remove()})})}if(c instanceof Array)for(b.init(c.length,p),k=0;k<c.length;k++)(c[k]instanceof jQuery||c[k]instanceof Element)&&n.append($(c[k])),b.load();else p();$(window).on("resize",function(){if(d.outerHeight()<$(window).height()){var b=($(window).height()-d.outerHeight())/2;d.css("margin-top",b+"px")}else d.css("margin-top","0px");d.outerWidth()<$(window).width()?(b=
($(window).width()-d.outerWidth())/2,d.css("margin-left",b+"px")):d.css("margin-left","0px")});return f}}})();
(function(a){cacheMapping={};var b,c,e={timeout:850,type:"GET",dataType:"html"};a.hpjax=function(b){b=h(b);g(b)};a.fn.hpjax=function(d,c){b=a(c);b.find(".content-panel").addClass("content-active");cacheMapping[location.pathname]=b.find(".content-active");a(this).on("click",d,function(b){b.preventDefault();b=a(this).attr("href");b=h(b);g(b)});a(window).on("popstate",function(b){var a,d=b.originalEvent.state;d?(b=cacheMapping[d],a=h(d),b?(b.trigger("hpjax:cached",d),f(b,a)):k(a,!1)):(b=cacheMapping[location.pathname],
a=h(location.pathname),b?(b.trigger("hpjax:cached",location.pathname),f(b,a)):k(a,!1))})};var g=function(b){var a=b.url,c="";0<=a.indexOf("?")&&(c=a.substring(a.indexOf("?")));(c=cacheMapping[a.replace(c,"")])?(history.pushState(a,"",a),c.trigger("hpjax:cached",b),f(c,b)):k(b,!0)},k=function(d,k){var g=d.url,h="",q="?hpjax\x3d1";0<=g.indexOf("?")&&(h=g.substring(g.indexOf("?")),q="\x26hpjax\x3d1");var l=a.extend(!0,{},a.ajaxSettings,e);l.url=l.history_url=g;l.url+=q;l.beforeSend=function(b,a){"GET"!==
a.type&&(a.timeout=0);b.setRequestHeader("X-HPJAX","true");0<a.timeout&&(c=setTimeout(function(){location.href=a.history_url},a.timeout),a.timeout=0)};l.complete=function(){c&&clearTimeout(c)};l.success=function(c,e,g){c=a(c);e=d.url;b.append(c);cacheMapping[e.replace(h,"")]=c;k&&history.pushState(e,"",e);f(c.trigger("hpjax:loaded",e),d)};a.ajax(l)},f=function(c,e){b.find(".content-active").removeClass("content-active");b.trigger("hpjax:hide");c.addClass("content-active").trigger("hpjax:show",e.url);
if(e.anchor){var g=a(e.anchor).offset().top-a("#global-header").height();a("html,body").animate({scrollTop:g})}},h=function(b){var a,c="";-1<(a=b.indexOf("#"))&&(c=b.substring(a),b=b.substring(0,a),-1<(a=c.indexOf("?"))&&(b+=c.substring(a),c=c.substring(0,a)));return{url:b,anchor:c}}})(jQuery);vimana=vimana||{};
(function(){vimana.data=vimana.data={};var a="";vimana.init=function(b){a=b;vimana.navi.init()};vimana.navi={init:function(){vimana.data.navigations?b.init(vimana.data.navigations):$.ajax({type:"GET",url:a+"/default-api/get/navigations",dataType:"text",success:function(a){a=JSON.parse(a);b.init(vimana.data.navigations=a)}})}};vimana.plugin={init:function(b,a){var k=$(".vimana-plugins");k.find(".content-plugin").remove();c.init(k,b,a)}};var b={init:function(b){var a=$("#global-navi");a.empty();for(var c=
0,f;f=b[c];c++){var h=$("\x3cdiv /\x3e",{"class":"navi-block"}).append($("\x3cdiv /\x3e",{"class":"icon"})).append($("\x3cdiv /\x3e",{"class":"label"}).text(f.displayName)),d=$("\x3ca /\x3e",{"class":"hpjax",id:"navi-"+f.key});f.path?d.attr("href",f.path):d.attr("href","/portal/"+f.key);d.append(h);a.append(d)}$(document).trigger(jQuery.Event("vimana-init"))}},c={init:function(b,a,c){for(var f=0,h;h=a[f];f++)if(h.match(/^[a-zA-Z_]+$/)&&portal.plugin[h]&&portal.plugin[h].init){var d=new Function("arg1, arg2",
"portal.plugin."+h+".init(arg1, arg2)"),m=vimana.factory.contentPart();m.addClass("content-plugin");b.append(m);try{d(m,c)}catch(n){console.error({"plugin-name":h,error:n})}}}}})();vimana=vimana||{};
(function(){vimana.util=vimana.util||{};var a=[];(function(){var b=3E3,c=function(){for(var e=(new Date).getTime(),g=0;g<a.length;g++){var k=parseInt(a[g].callUnixTime,10)-e;if(0>=k)a[g].callFunction(a[g].argument),a.splice(g,1),g--;else{b=Math.min(k,b);break}}setTimeout(c,b)};c()})();vimana.util={setCache:function(b){b=$.extend({key:"",value:"",term:""},b);if(!b.key||"string"!==typeof b.value)return!1;if(!b.term||isNaN((new Date(b.term)).getTime()))null!==localStorage.getItem(b.key)?b.term=JSON.parse(localStorage.getItem(b.key)).term:
b.term=(new Date).getTime()+864E5;(new Date).getTime()+6048E5<parseInt(b.term,10)&&(b.term=(new Date).getTime()+6048E5);var a;try{a=JSON.stringify({term:b.term,data:b.value})}catch(e){return!1}localStorage.setItem(b.key,a);return!0},getCache:function(b){var a;try{a=JSON.parse(localStorage.getItem(b))}catch(e){return null}return a&&vimana.util.arrayKeyExists("term",a)?(new Date).getTime()>parseInt(a.term,10)?(localStorage.removeItem(b),null):"object"===typeof a.data?JSON.stringify(a.data):a.data:null},
clearCache:function(b){var a=JSON.stringify({term:0,data:""});localStorage.setItem(b,a)},setSchedule:function(b,c,e){b&&!isNaN((new Date(b)).getTime())&&c&&"function"!==typeof callback&&(a.push({callUnixTime:b,callFunction:c,argument:e}),a.sort(function(b,a){return b.callUnixTime-a.callUnixTime}))},arrayKeyExists:function(b,a){return!a||a.constructor!==Array&&a.constructor!==Object?!1:b in a}};Number.isFinite=Number.isFinite||function(a){return"number"===typeof a&&isFinite(a)};Number.isNaN=Number.isNaN||
function(a){return"number"===typeof a&&isNaN(a)}})();